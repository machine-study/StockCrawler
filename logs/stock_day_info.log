I, [2014-07-06T19:36:35.801772 #5582]  INFO -- : start to dispatch url tasks
I, [2014-07-06T19:36:35.803629 #5582]  INFO -- : start to crawlIndustries
I, [2014-07-06T19:36:36.168297 #5582]  INFO -- : finish crawlIndustries
I, [2014-07-06T19:36:36.168441 #5582]  INFO -- : start to dispatch url task of 生物制药
I, [2014-07-06T19:36:36.608498 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600062-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (55483600.0, 17.2, -1.149, '600062', '2014-07-06 11:36:36', 17.42, '生物制药', 17.15, 983888.726508, '华润双鹤', 983888.726508, 17.4, 1.794, 11.3, -0.2, 17.22, 17.41, 'sh600062', '2000-01-01 15:03:04', 17, 0.56194, '2014-07-06 11:36:36', 3212592)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:36:36.608648 #5582]  INFO -- : finish dispatch url task of 生物制药
I, [2014-07-06T19:36:36.608692 #5582]  INFO -- : start to dispatch url task of 其它行业
I, [2014-07-06T19:36:36.919768 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600172-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (46825696.0, 6.4, -1.69, '600172', '2014-07-06 11:36:36', 6.51, '其它行业', 6.38, 341351.76832, '黄河旋风', 317874.2016, 6.5, 1.502, 16.289, -0.11, 6.41, 6.51, 'sh600172', '2000-01-01 15:03:04', 6, 1.46835, '2014-07-06 11:36:36', 7292958)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:36:36.919921 #5582]  INFO -- : finish dispatch url task of 其它行业
I, [2014-07-06T19:36:36.919981 #5582]  INFO -- : start to dispatch url task of 房地产
I, [2014-07-06T19:44:37.747647 #5582]  INFO -- : Error in crawl_stock_day_info:  
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:25:in `sleep'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:25:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:44:37.747938 #5582]  INFO -- : finish dispatch url task of 房地产
I, [2014-07-06T19:44:37.748044 #5582]  INFO -- : start to dispatch url task of 金融行业
I, [2014-07-06T19:44:47.284386 #5725]  INFO -- : start to dispatch url tasks
I, [2014-07-06T19:44:47.286575 #5725]  INFO -- : start to crawlIndustries
I, [2014-07-06T19:44:47.580855 #5725]  INFO -- : finish crawlIndustries
I, [2014-07-06T19:44:47.581048 #5725]  INFO -- : start to dispatch url task of 生物制药
I, [2014-07-06T19:45:00.954741 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600062-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (55483600.0, 17.2, -1.149, '600062', '2014-07-06 11:45:00', 17.42, '生物制药', 17.15, 983888.726508, '华润双鹤', 983888.726508, 17.4, 1.794, 11.3, -0.2, 17.22, 17.41, 'sh600062', '2000-01-01 15:03:04', 17, 0.56194, '2014-07-06 11:45:00', 3212592)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:45:06.685498 #5725]  INFO -- : finish dispatch url task of 生物制药
I, [2014-07-06T19:45:08.943042 #5725]  INFO -- : start to dispatch url task of 其它行业
I, [2014-07-06T19:45:47.221320 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600172-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (46825696.0, 6.4, -1.69, '600172', '2014-07-06 11:45:47', 6.51, '其它行业', 6.38, 341351.76832, '黄河旋风', 317874.2016, 6.5, 1.502, 16.289, -0.11, 6.41, 6.51, 'sh600172', '2000-01-01 15:03:04', 6, 1.46835, '2014-07-06 11:45:47', 7292958)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:45:50.709040 #5725]  INFO -- : finish dispatch url task of 其它行业
I, [2014-07-06T19:45:52.032716 #5725]  INFO -- : start to dispatch url task of 房地产
I, [2014-07-06T19:46:51.909473 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600048-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (461272416.0, 5.02, 1.822, '600048', '2014-07-06 11:46:51', 5.06, '房地产', 4.92, 5385616.768261, '保利地产', 5385616.768261, 4.94, 0.683, 3.331, 0.09, 5.03, 4.94, 'sh600048', '2000-01-01 15:03:04', 5, 0.86043, '2014-07-06 11:46:51', 92126392)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:47:04.428079 #5725]  INFO -- : finish dispatch url task of 房地产
I, [2014-07-06T19:47:06.558080 #5725]  INFO -- : start to dispatch url task of 金融行业
I, [2014-07-06T19:47:52.285481 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600000-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (428330848.0, 9.06, 0.0, '600000', '2014-07-06 11:47:44', 9.09, '金融行业', 9.05, 16918698.573405, '浦发银行', 13534958.858724, 9.08, 0.781, 4.134, 0.0, 9.07, 9.07, 'sh600000', '2000-01-01 15:03:04', 9, 0.31672, '2014-07-06 11:47:44', 47263940)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:48:36.205297 #5725]  INFO -- : finish dispatch url task of 金融行业
I, [2014-07-06T19:48:36.205549 #5725]  INFO -- : start to dispatch url task of 综合行业
E, [2014-07-06T19:53:03.218420 #5725] ERROR -- : Error in crawl stockInfo of 综合行业 industry!: 
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:72:in `sleep'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:72:in `block (2 levels) in wait'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:68:in `handle_interrupt'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:68:in `block in wait'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:66:in `handle_interrupt'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:66:in `wait'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:196:in `block (2 levels) in pop'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:188:in `synchronize'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:188:in `block in pop'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:187:in `handle_interrupt'
/home/chenjiang/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/thread.rb:187:in `pop'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide/ide_processor.rb:32:in `process_commands'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide/event_processor.rb:58:in `line_event'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide/event_processor.rb:34:in `at_line'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/debase-0.0.9/lib/debase/context.rb:37:in `at_line'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:27:in `rescue in crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:14:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:53:03.218671 #5725]  INFO -- : finish dispatch url task of 综合行业
I, [2014-07-06T19:53:03.218745 #5725]  INFO -- : start to dispatch url task of 石油行业
I, [2014-07-06T19:53:44.273734 #6319]  INFO -- : start to dispatch url tasks
I, [2014-07-06T19:53:44.275618 #6319]  INFO -- : start to crawlIndustries
I, [2014-07-06T19:53:44.494170 #6319]  INFO -- : finish crawlIndustries
I, [2014-07-06T19:53:44.494314 #6319]  INFO -- : start to dispatch url task of 生物制药
I, [2014-07-06T19:53:44.973191 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600062-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (55483600.0, 17.2, -1.149, '600062', '2014-07-06 11:53:44', 17.42, '生物制药', 17.15, 983888.726508, '华润双鹤', 983888.726508, 17.4, 1.794, 11.3, -0.2, 17.22, 17.41, 'sh600062', '2000-01-01 15:03:04', 17, 0.56194, '2014-07-06 11:53:44', 3212592)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:53:44.973476 #6319]  INFO -- : finish dispatch url task of 生物制药
I, [2014-07-06T19:53:44.973575 #6319]  INFO -- : start to dispatch url task of 其它行业
I, [2014-07-06T19:53:45.395317 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600172-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (46825696.0, 6.4, -1.69, '600172', '2014-07-06 11:53:45', 6.51, '其它行业', 6.38, 341351.76832, '黄河旋风', 317874.2016, 6.5, 1.502, 16.289, -0.11, 6.41, 6.51, 'sh600172', '2000-01-01 15:03:04', 6, 1.46835, '2014-07-06 11:53:45', 7292958)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:53:45.395563 #6319]  INFO -- : finish dispatch url task of 其它行业
I, [2014-07-06T19:53:45.395659 #6319]  INFO -- : start to dispatch url task of 房地产
I, [2014-07-06T19:53:45.662202 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600048-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (461272416.0, 5.02, 1.822, '600048', '2014-07-06 11:53:45', 5.06, '房地产', 4.92, 5385616.768261, '保利地产', 5385616.768261, 4.94, 0.683, 3.331, 0.09, 5.03, 4.94, 'sh600048', '2000-01-01 15:03:04', 5, 0.86043, '2014-07-06 11:53:45', 92126392)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:53:45.662456 #6319]  INFO -- : finish dispatch url task of 房地产
I, [2014-07-06T19:53:45.662555 #6319]  INFO -- : start to dispatch url task of 金融行业
I, [2014-07-06T19:53:46.051140 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600000-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (428330848.0, 9.06, 0.0, '600000', '2014-07-06 11:53:46', 9.09, '金融行业', 9.05, 16918698.573405, '浦发银行', 13534958.858724, 9.08, 0.781, 4.134, 0.0, 9.07, 9.07, 'sh600000', '2000-01-01 15:03:04', 9, 0.31672, '2014-07-06 11:53:46', 47263940)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:53:46.051256 #6319]  INFO -- : finish dispatch url task of 金融行业
I, [2014-07-06T19:53:46.051322 #6319]  INFO -- : start to dispatch url task of 综合行业
I, [2014-07-06T19:53:46.340265 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600051-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (19751716.0, 7.8, 0.515, '600051', '2014-07-06 11:53:46', 7.85, '综合行业', 7.73, 242797.28, '宁波联合', 236174.4, 7.78, 1.307, 39.05, 0.04, 7.82, 7.77, 'sh600051', '2000-01-01 15:03:04', 7, 0.8383, '2014-07-06 11:53:46', 2535016)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:53:46.340424 #6319]  INFO -- : finish dispatch url task of 综合行业
I, [2014-07-06T19:53:46.340468 #6319]  INFO -- : start to dispatch url task of 石油行业
I, [2014-07-06T19:53:46.729251 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600028-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (348819136.0, 5.05, -0.589, '600028', '2014-07-06 11:53:46', 5.1, '石油行业', 5.02, 59098544.57584, '中国石化', 46188744.64424, 5.08, 1.009, 8.739, -0.03, 5.06, 5.09, 'sh600028', '2000-01-01 15:03:04', 5, 0.07569, '2014-07-06 11:53:46', 69092904)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:53:46.729415 #6319]  INFO -- : finish dispatch url task of 石油行业
I, [2014-07-06T19:53:46.729479 #6319]  INFO -- : start to dispatch url task of 有色金属
I, [2014-07-06T19:53:50.653820 #6319]  INFO -- : finish dispatch url task of 有色金属
I, [2014-07-06T19:53:50.653965 #6319]  INFO -- : start to dispatch url task of 造纸行业
I, [2014-07-06T19:53:52.134682 #6319]  INFO -- : finish dispatch url task of 造纸行业
I, [2014-07-06T19:53:52.134853 #6319]  INFO -- : start to dispatch url task of 印刷包装
I, [2014-07-06T19:53:53.418228 #6319]  INFO -- : finish dispatch url task of 印刷包装
I, [2014-07-06T19:53:53.418381 #6319]  INFO -- : start to dispatch url task of 仪器仪表
I, [2014-07-06T19:54:00.790715 #6319]  INFO -- : finish dispatch url task of 仪器仪表
I, [2014-07-06T19:54:00.790898 #6319]  INFO -- : start to dispatch url task of 医疗器械
I, [2014-07-06T19:54:02.298974 #6319]  INFO -- : finish dispatch url task of 医疗器械
I, [2014-07-06T19:54:02.299150 #6319]  INFO -- : start to dispatch url task of 物资外贸
I, [2014-07-06T19:54:03.539332 #6319]  INFO -- : finish dispatch url task of 物资外贸
I, [2014-07-06T19:54:03.539469 #6319]  INFO -- : start to dispatch url task of 陶瓷行业
I, [2014-07-06T19:54:04.214184 #6319]  INFO -- : finish dispatch url task of 陶瓷行业
I, [2014-07-06T19:54:04.214321 #6319]  INFO -- : start to dispatch url task of 塑料制品
I, [2014-07-06T19:54:06.276342 #6319]  INFO -- : finish dispatch url task of 塑料制品
I, [2014-07-06T19:54:06.276561 #6319]  INFO -- : start to dispatch url task of 水泥行业
I, [2014-07-06T19:54:12.688868 #6319]  INFO -- : finish dispatch url task of 水泥行业
I, [2014-07-06T19:54:12.689004 #6319]  INFO -- : start to dispatch url task of 食品行业
I, [2014-07-06T19:54:15.563557 #6319]  INFO -- : finish dispatch url task of 食品行业
I, [2014-07-06T19:54:15.563704 #6319]  INFO -- : start to dispatch url task of 商业百货
I, [2014-07-06T19:54:18.968573 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '000587-15:33:16' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (97136048.0, 11.36, 5.773, '000587', '2014-07-06 11:54:18', 11.49, '商业百货', 10.54, 632905.057824, '金叶珠宝', 414547.806784, 10.69, 5.15, 43.692, 0.62, 11.37, 10.74, 'sz000587', '2000-01-01 15:33:16', 11, 2.41906, '2014-07-06 11:54:18', 8827619)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:54:18.968752 #6319]  INFO -- : finish dispatch url task of 商业百货
I, [2014-07-06T19:54:18.968803 #6319]  INFO -- : start to dispatch url task of 汽车制造
I, [2014-07-06T19:54:24.745677 #6319]  INFO -- : finish dispatch url task of 汽车制造
I, [2014-07-06T19:54:24.745849 #6319]  INFO -- : start to dispatch url task of 农药化肥
I, [2014-07-06T19:54:26.973051 #6319]  INFO -- : finish dispatch url task of 农药化肥
I, [2014-07-06T19:54:26.973286 #6319]  INFO -- : start to dispatch url task of 农林牧渔
I, [2014-07-06T19:54:30.415432 #6319]  INFO -- : finish dispatch url task of 农林牧渔
I, [2014-07-06T19:54:30.415735 #6319]  INFO -- : start to dispatch url task of 酿酒行业
I, [2014-07-06T19:54:32.226550 #6319]  INFO -- : finish dispatch url task of 酿酒行业
I, [2014-07-06T19:54:32.226699 #6319]  INFO -- : start to dispatch url task of 摩托车
I, [2014-07-06T19:54:33.077427 #6319]  INFO -- : finish dispatch url task of 摩托车
I, [2014-07-06T19:54:33.077712 #6319]  INFO -- : start to dispatch url task of 煤炭行业
I, [2014-07-06T19:54:33.902656 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600714-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (0.0, 0.0, 0.0, '600714', '2014-07-06 11:54:33', 0.0, '煤炭行业', 0.0, 215169.373767, '金瑞矿业', 215169.373767, 0.0, 4.601, 98.375, 0.0, 0.0, 7.87, 'sh600714', '2000-01-01 15:03:04', 7, 0.0, '2014-07-06 11:54:33', 0)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:54:33.902816 #6319]  INFO -- : finish dispatch url task of 煤炭行业
I, [2014-07-06T19:54:33.902879 #6319]  INFO -- : start to dispatch url task of 开发区
I, [2014-07-06T19:54:34.664703 #6319]  INFO -- : finish dispatch url task of 开发区
I, [2014-07-06T19:54:34.664887 #6319]  INFO -- : start to dispatch url task of 酒店旅游
I, [2014-07-06T19:54:36.864649 #6319]  INFO -- : finish dispatch url task of 酒店旅游
I, [2014-07-06T19:54:36.864792 #6319]  INFO -- : start to dispatch url task of 交通运输
I, [2014-07-06T19:54:46.635218 #6319]  INFO -- : finish dispatch url task of 交通运输
I, [2014-07-06T19:54:46.635434 #6319]  INFO -- : start to dispatch url task of 建筑建材
I, [2014-07-06T19:54:51.316836 #6319]  INFO -- : finish dispatch url task of 建筑建材
I, [2014-07-06T19:54:51.317024 #6319]  INFO -- : start to dispatch url task of 家具行业
I, [2014-07-06T19:54:57.313026 #6319]  INFO -- : finish dispatch url task of 家具行业
I, [2014-07-06T19:54:57.313191 #6319]  INFO -- : start to dispatch url task of 家电行业
I, [2014-07-06T19:54:59.323424 #6319]  INFO -- : finish dispatch url task of 家电行业
I, [2014-07-06T19:54:59.323597 #6319]  INFO -- : start to dispatch url task of 机械行业
I, [2014-07-06T19:55:14.734735 #6319]  INFO -- : finish dispatch url task of 机械行业
I, [2014-07-06T19:55:14.734904 #6319]  INFO -- : start to dispatch url task of 环保行业
I, [2014-07-06T19:55:15.019445 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600388-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (156696464.0, 24.52, -1.209, '600388', '2014-07-06 11:55:14', 24.87, '环保行业', 24.43, 1048524.24, '龙净环保', 1048524.24, 24.78, 3.721, 22.916, -0.3, 24.53, 24.82, 'sh600388', '2000-01-01 15:03:04', 24, 1.49082, '2014-07-06 11:55:14', 6375033)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:55:15.019682 #6319]  INFO -- : finish dispatch url task of 环保行业
I, [2014-07-06T19:55:15.019776 #6319]  INFO -- : start to dispatch url task of 化纤行业
I, [2014-07-06T19:55:16.837687 #6319]  INFO -- : finish dispatch url task of 化纤行业
I, [2014-07-06T19:55:16.837842 #6319]  INFO -- : start to dispatch url task of 化工行业
I, [2014-07-06T19:55:24.445181 #6319]  INFO -- : finish dispatch url task of 化工行业
I, [2014-07-06T19:55:24.445399 #6319]  INFO -- : start to dispatch url task of 供水供气
I, [2014-07-06T19:55:25.893078 #6319]  INFO -- : finish dispatch url task of 供水供气
I, [2014-07-06T19:55:25.893266 #6319]  INFO -- : start to dispatch url task of 公路桥梁
I, [2014-07-06T19:55:32.185163 #6319]  INFO -- : finish dispatch url task of 公路桥梁
I, [2014-07-06T19:55:32.185349 #6319]  INFO -- : start to dispatch url task of 钢铁行业
I, [2014-07-06T19:55:35.160789 #6319]  INFO -- : finish dispatch url task of 钢铁行业
I, [2014-07-06T19:55:35.161005 #6319]  INFO -- : start to dispatch url task of 服装鞋类
I, [2014-07-06T19:55:37.727866 #6319]  INFO -- : finish dispatch url task of 服装鞋类
I, [2014-07-06T19:55:37.728051 #6319]  INFO -- : start to dispatch url task of 飞机制造
I, [2014-07-06T19:55:38.688441 #6319]  INFO -- : finish dispatch url task of 飞机制造
I, [2014-07-06T19:55:38.688586 #6319]  INFO -- : start to dispatch url task of 纺织行业
I, [2014-07-06T19:55:41.227091 #6319]  INFO -- : finish dispatch url task of 纺织行业
I, [2014-07-06T19:55:41.227239 #6319]  INFO -- : start to dispatch url task of 纺织机械
I, [2014-07-06T19:55:41.898156 #6319]  INFO -- : finish dispatch url task of 纺织机械
I, [2014-07-06T19:55:41.898299 #6319]  INFO -- : start to dispatch url task of 发电设备
I, [2014-07-06T19:55:50.752966 #6319]  INFO -- : finish dispatch url task of 发电设备
I, [2014-07-06T19:55:50.753175 #6319]  INFO -- : start to dispatch url task of 电子信息
I, [2014-07-06T19:56:02.938227 #6319]  INFO -- : finish dispatch url task of 电子信息
I, [2014-07-06T19:56:02.938523 #6319]  INFO -- : start to dispatch url task of 电子器件
I, [2014-07-06T19:56:07.924603 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '002512-15:33:16' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (47502284.0, 14.12, -0.141, '002512', '2014-07-06 11:56:07', 14.3, '电子器件', 13.92, 500600.670885, '达华智能', 230790.6594, 14.19, 3.512, 51.796, -0.02, 14.13, 14.15, 'sz002512', '2000-01-01 15:33:16', 14, 2.06916, '2014-07-06 11:56:07', 3379642)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:56:07.924775 #6319]  INFO -- : finish dispatch url task of 电子器件
I, [2014-07-06T19:56:07.924822 #6319]  INFO -- : start to dispatch url task of 电器行业
I, [2014-07-06T19:56:09.622737 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '002617-15:33:16' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (124402184.0, 26.02, -3.019, '002617', '2014-07-06 11:56:09', 27.08, '电器行业', 25.83, 468360.0, '露笑科技', 145445.295, 26.86, 5.261, 123.905, -0.81, 26.03, 26.83, 'sz002617', '2000-01-01 15:33:16', 26, 8.48704, '2014-07-06 11:56:09', 4744043)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:56:09.622889 #6319]  INFO -- : finish dispatch url task of 电器行业
I, [2014-07-06T19:56:09.622933 #6319]  INFO -- : start to dispatch url task of 电力行业
I, [2014-07-06T19:56:11.962975 #6319]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '000602-15:34:58' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (0.0, 0.0, -100.0, '000602', '2014-07-06 11:56:11', 0.0, '电力行业', 0.0, 1353267.867618, '金马退市', 280137.319164, 0.0, 3.727, 20.953, -13.41, 0.0, 13.41, 'sz000602', '2000-01-01 15:34:58', 0, 0.0, '2014-07-06 11:56:11', 0)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T19:56:11.963165 #6319]  INFO -- : finish dispatch url task of 电力行业
I, [2014-07-06T19:56:11.963228 #6319]  INFO -- : start to dispatch url task of 船舶制造
I, [2014-07-06T19:56:17.807839 #6319]  INFO -- : finish dispatch url task of 船舶制造
I, [2014-07-06T19:56:17.807979 #6319]  INFO -- : start to dispatch url task of 传媒娱乐
I, [2014-07-06T19:56:19.600237 #6319]  INFO -- : finish dispatch url task of 传媒娱乐
I, [2014-07-06T19:56:19.600382 #6319]  INFO -- : finish dispatch url tasks
I, [2014-07-06T20:39:16.818924 #5582]  INFO -- : finish dispatch url task of 金融行业
I, [2014-07-06T20:39:16.819068 #5582]  INFO -- : start to dispatch url task of 综合行业
I, [2014-07-06T20:39:17.209266 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600051-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (19751716.0, 7.8, 0.515, '600051', '2014-07-06 12:39:17', 7.85, '综合行业', 7.73, 242797.28, '宁波联合', 236174.4, 7.78, 1.307, 39.05, 0.04, 7.82, 7.77, 'sh600051', '2000-01-01 15:03:04', 7, 0.8383, '2014-07-06 12:39:17', 2535016)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:17.209473 #5582]  INFO -- : finish dispatch url task of 综合行业
I, [2014-07-06T20:39:17.209536 #5582]  INFO -- : start to dispatch url task of 石油行业
I, [2014-07-06T20:39:27.598825 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600028-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (348819136.0, 5.05, -0.589, '600028', '2014-07-06 12:39:27', 5.1, '石油行业', 5.02, 59098544.57584, '中国石化', 46188744.64424, 5.08, 1.009, 8.739, -0.03, 5.06, 5.09, 'sh600028', '2000-01-01 15:03:04', 5, 0.07569, '2014-07-06 12:39:27', 69092904)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:27.599047 #5582]  INFO -- : finish dispatch url task of 石油行业
I, [2014-07-06T20:39:27.599142 #5582]  INFO -- : start to dispatch url task of 有色金属
I, [2014-07-06T20:39:28.010192 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600111-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (327936192.0, 19.61, -1.01, '600111', '2014-07-06 12:39:27', 19.91, '有色金属', 19.57, 4749628.284, '包钢稀土', 2901240.383694, 19.81, 6.015, 30.174, -0.2, 19.62, 19.81, 'sh600111', '2000-01-01 15:03:04', 19, 1.12702, '2014-07-06 12:39:27', 16673865)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:28.010351 #5582]  INFO -- : finish dispatch url task of 有色金属
I, [2014-07-06T20:39:28.010397 #5582]  INFO -- : start to dispatch url task of 造纸行业
I, [2014-07-06T20:39:28.421266 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600069-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (35858476.0, 3.67, -1.344, '600069', '2014-07-06 12:39:28', 3.75, '造纸行业', 3.6, 302912.310848, '银鸽投资', 302912.310848, 3.72, 2.018, -10.794, -0.05, 3.68, 3.72, 'sh600069', '2000-01-01 15:03:04', 3, 1.18426, '2014-07-06 12:39:28', 9774580)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:28.421394 #5582]  INFO -- : finish dispatch url task of 造纸行业
I, [2014-07-06T20:39:28.421447 #5582]  INFO -- : start to dispatch url task of 印刷包装
I, [2014-07-06T20:39:28.799434 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600210-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (208003312.0, 3.39, 8.307, '600210', '2014-07-06 12:39:28', 3.44, '印刷包装', 3.1, 487053.557562, '紫江企业', 487053.557562, 3.11, 1.309, 21.321, 0.26, 3.4, 3.13, 'sh600210', '2000-01-01 15:03:04', 3, 4.34277, '2014-07-06 12:39:28', 62394144)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:28.799579 #5582]  INFO -- : finish dispatch url task of 印刷包装
I, [2014-07-06T20:39:28.799621 #5582]  INFO -- : start to dispatch url task of 仪器仪表
I, [2014-07-06T20:39:29.088416 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600366-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (258254320.0, 14.96, -0.73, '600366', '2014-07-06 12:39:29', 15.56, '仪器仪表', 14.95, 769688.634, '宁波韵升', 769688.634, 15.23, 2.517, 21.981, -0.11, 14.97, 15.07, 'sh600366', '2000-01-01 15:03:04', 14, 3.27972, '2014-07-06 12:39:29', 16874104)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:29.088566 #5582]  INFO -- : finish dispatch url task of 仪器仪表
I, [2014-07-06T20:39:29.088608 #5582]  INFO -- : start to dispatch url task of 医疗器械
I, [2014-07-06T20:39:29.388569 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600055-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (0.0, 0.0, 0.0, '600055', '2014-07-06 12:39:29', 0.0, '医疗器械', 0.0, 290043.0, '华润万东', 290043.0, 0.0, 4.456, 67.0, 0.0, 0.0, 13.4, 'sh600055', '2000-01-01 15:03:04', 13, 0.0, '2014-07-06 12:39:29', 0)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:29.388819 #5582]  INFO -- : finish dispatch url task of 医疗器械
I, [2014-07-06T20:39:29.389545 #5582]  INFO -- : start to dispatch url task of 物资外贸
I, [2014-07-06T20:39:29.700039 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600058-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (47459068.0, 10.54, -1.033, '600058', '2014-07-06 12:39:29', 10.68, '物资外贸', 10.51, 1129793.889394, '五矿发展', 1129793.889394, 10.65, 1.316, 40.383, -0.11, 10.55, 10.65, 'sh600058', '2000-01-01 15:03:04', 10, 0.41967, '2014-07-06 12:39:29', 4498450)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:29.700278 #5582]  INFO -- : finish dispatch url task of 物资外贸
I, [2014-07-06T20:39:29.700372 #5582]  INFO -- : start to dispatch url task of 陶瓷行业
I, [2014-07-06T20:39:29.966469 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600145-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (25994612.0, 3.49, 1.449, '600145', '2014-07-06 12:39:29', 3.54, '陶瓷行业', 3.42, 132189.75, '*ST国创', 132189.75, 3.42, 12.359, -15.217, 0.05, 3.5, 3.45, 'sh600145', '2000-01-01 15:03:04', 3, 1.96651, '2014-07-06 12:39:29', 7427207)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:29.966599 #5582]  INFO -- : finish dispatch url task of 陶瓷行业
I, [2014-07-06T20:39:29.966643 #5582]  INFO -- : start to dispatch url task of 塑料制品
I, [2014-07-06T20:39:30.277840 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600074-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (272586432.0, 5.77, 0.522, '600074', '2014-07-06 12:39:30', 6.12, '塑料制品', 5.55, 517877.182152, '中达股份', 517877.182152, 5.75, 8.2, 21.729, 0.03, 5.78, 5.75, 'sh600074', '2000-01-01 15:03:04', 5, 5.19355, '2014-07-06 12:39:30', 46533204)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:30.278053 #5582]  INFO -- : finish dispatch url task of 塑料制品
I, [2014-07-06T20:39:30.278143 #5582]  INFO -- : start to dispatch url task of 水泥行业
I, [2014-07-06T20:39:30.689113 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600217-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (184034192.0, 6.21, -1.268, '600217', '2014-07-06 12:39:30', 6.6, '水泥行业', 6.21, 411678.4, '秦岭水泥', 411678.4, 6.27, -112.658, -35.178, -0.08, 6.22, 6.31, 'sh600217', '2000-01-01 15:03:04', 6, 4.34289, '2014-07-06 12:39:30', 28697824)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:30.689357 #5582]  INFO -- : finish dispatch url task of 水泥行业
I, [2014-07-06T20:39:30.689451 #5582]  INFO -- : start to dispatch url task of 食品行业
I, [2014-07-06T20:39:30.978095 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600073-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (157881920.0, 7.63, 2.276, '600073', '2014-07-06 12:39:30', 7.65, '食品行业', 7.45, 628569.647724, '上海梅林', 592711.287096, 7.45, 3.188, 40.211, 0.17, 7.64, 7.47, 'sh600073', '2000-01-01 15:03:04', 7, 2.69369, '2014-07-06 12:39:30', 20897634)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:30.978245 #5582]  INFO -- : finish dispatch url task of 食品行业
I, [2014-07-06T20:39:30.978307 #5582]  INFO -- : start to dispatch url task of 商业百货
I, [2014-07-06T20:39:31.367115 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600056-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (86485640.0, 10.76, -1.011, '600056', '2014-07-06 12:39:31', 10.98, '商业百货', 10.66, 1090476.9318, '中国医药', 952561.808808, 10.93, 1.211, 10.16, -0.11, 10.77, 10.88, 'sh600056', '2000-01-01 15:03:04', 10, 0.90982, '2014-07-06 12:39:31', 8046984)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:31.367229 #5582]  INFO -- : finish dispatch url task of 商业百货
I, [2014-07-06T20:39:31.367270 #5582]  INFO -- : start to dispatch url task of 汽车制造
I, [2014-07-06T20:39:31.745074 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600006-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (24651858.0, 3.03, -0.977, '600006', '2014-07-06 12:39:31', 3.06, '汽车制造', 3.02, 608000.0, '东风汽车', 608000.0, 3.06, 1.013, 121.116, -0.03, 3.04, 3.07, 'sh600006', '2000-01-01 15:03:04', 3, 0.40556, '2014-07-06 12:39:31', 8111218)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:31.745289 #5582]  INFO -- : finish dispatch url task of 汽车制造
I, [2014-07-06T20:39:31.745360 #5582]  INFO -- : start to dispatch url task of 农药化肥
I, [2014-07-06T20:39:32.045258 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600096-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (22447156.0, 7.11, -0.559, '600096', '2014-07-06 12:39:31', 7.19, '农药化肥', 7.11, 803903.654192, '云天化', 371139.693168, 7.17, 1.039, 18.762, -0.04, 7.12, 7.16, 'sh600096', '2000-01-01 15:03:04', 7, 0.60325, '2014-07-06 12:39:31', 3144540)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:32.045414 #5582]  INFO -- : finish dispatch url task of 农药化肥
I, [2014-07-06T20:39:32.045478 #5582]  INFO -- : start to dispatch url task of 农林牧渔
I, [2014-07-06T20:39:32.501126 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600097-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (10431159.0, 10.57, -0.189, '600097', '2014-07-06 12:39:32', 10.7, '农林牧渔', 10.53, 214348.579258, '开创国际', 122145.982562, 10.7, 5.238, 20.745, -0.02, 10.58, 10.6, 'sh600097', '2000-01-01 15:03:04', 10, 0.85453, '2014-07-06 12:39:32', 986559)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:32.501300 #5582]  INFO -- : finish dispatch url task of 农林牧渔
I, [2014-07-06T20:39:32.501355 #5582]  INFO -- : start to dispatch url task of 酿酒行业
I, [2014-07-06T20:39:32.823381 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600059-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (75285104.0, 7.81, 0.128, '600059', '2014-07-06 12:39:32', 7.86, '酿酒行业', 7.75, 631457.372865, '古越龙山', 631457.372865, 7.78, 1.941, 33.957, 0.01, 7.82, 7.8, 'sh600059', '2000-01-01 15:03:04', 7, 1.19224, '2014-07-06 12:39:32', 9639582)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:32.823547 #5582]  INFO -- : finish dispatch url task of 酿酒行业
I, [2014-07-06T20:39:32.823592 #5582]  INFO -- : start to dispatch url task of 摩托车
I, [2014-07-06T20:39:33.090171 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600099-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (11941741.0, 6.42, -1.079, '600099', '2014-07-06 12:39:33', 6.49, '摩托车', 6.38, 140675.04, '林海股份', 140675.04, 6.49, 2.942, 3566.667, -0.07, 6.43, 6.49, 'sh600099', '2000-01-01 15:03:04', 6, 0.84851, '2014-07-06 12:39:33', 1859249)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:33.090324 #5582]  INFO -- : finish dispatch url task of 摩托车
I, [2014-07-06T20:39:33.090418 #5582]  INFO -- : start to dispatch url task of 煤炭行业
I, [2014-07-06T20:39:33.379138 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600121-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (7249013.0, 4.1, -0.964, '600121', '2014-07-06 12:39:33', 4.14, '煤炭行业', 4.09, 417306.123015, '郑州煤电', 258576.54, 4.14, 1.077, 82.2, -0.04, 4.11, 4.15, 'sh600121', '2000-01-01 15:03:04', 4, 0.28051, '2014-07-06 12:39:33', 1764800)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:33.379299 #5582]  INFO -- : finish dispatch url task of 煤炭行业
I, [2014-07-06T20:39:33.379360 #5582]  INFO -- : start to dispatch url task of 开发区
I, [2014-07-06T20:39:33.701802 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600007-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (8363400.0, 9.68, -0.615, '600007', '2014-07-06 12:39:33', 9.83, '开发区', 9.6, 976056.775446, '中国国贸', 976056.775446, 9.75, 1.955, 30.281, -0.06, 9.7, 9.75, 'sh600007', '2000-01-01 15:03:04', 9, 0.08551, '2014-07-06 12:39:33', 861341)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:33.701995 #5582]  INFO -- : finish dispatch url task of 开发区
I, [2014-07-06T20:39:33.702058 #5582]  INFO -- : start to dispatch url task of 酒店旅游
I, [2014-07-06T20:39:33.990690 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600054-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (26797140.0, 12.7, 0.079, '600054', '2014-07-06 12:39:33', 12.76, '酒店旅游', 12.41, 599085.85, '黄山旅游', 149495.02, 12.68, 2.931, 41.0, 0.01, 12.71, 12.7, 'sh600054', '2000-01-01 15:03:04', 12, 1.81057, '2014-07-06 12:39:33', 2129590)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:33.990808 #5582]  INFO -- : finish dispatch url task of 酒店旅游
I, [2014-07-06T20:39:33.990848 #5582]  INFO -- : start to dispatch url task of 交通运输
I, [2014-07-06T20:39:35.290658 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600004-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (22081868.0, 7.1, 0.0, '600004', '2014-07-06 12:39:35', 7.14, '交通运输', 7.07, 817650.0, '白云机场', 817650.0, 7.12, 1.026, 9.115, 0.0, 7.11, 7.11, 'sh600004', '2000-01-01 15:03:04', 7, 0.2704, '2014-07-06 12:39:35', 3109598)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:35.290817 #5582]  INFO -- : finish dispatch url task of 交通运输
I, [2014-07-06T20:39:35.290882 #5582]  INFO -- : start to dispatch url task of 建筑建材
I, [2014-07-06T20:39:35.735555 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600039-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (44009244.0, 5.57, -1.239, '600039', '2014-07-06 12:39:35', 5.67, '建筑建材', 5.5, 842505.415488, '四川路桥', 305337.6, 5.65, 1.281, 11.385, -0.07, 5.58, 5.65, 'sh600039', '2000-01-01 15:03:04', 5, 1.44578, '2014-07-06 12:39:35', 7911324)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:35.735834 #5582]  INFO -- : finish dispatch url task of 建筑建材
I, [2014-07-06T20:39:35.735934 #5582]  INFO -- : start to dispatch url task of 家具行业
I, [2014-07-06T20:39:36.013265 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600337-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (15522859.0, 5.78, -0.686, '600337', '2014-07-06 12:39:35', 5.86, '家具行业', 5.76, 374503.232601, '美克股份', 369594.470601, 5.83, 1.368, 21.444, -0.04, 5.79, 5.83, 'sh600337', '2000-01-01 15:03:04', 5, 0.42034, '2014-07-06 12:39:35', 2683171)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:36.013499 #5582]  INFO -- : finish dispatch url task of 家具行业
I, [2014-07-06T20:39:36.013657 #5582]  INFO -- : start to dispatch url task of 家电行业
I, [2014-07-06T20:39:36.302298 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600060-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (73075040.0, 9.68, -0.309, '600060', '2014-07-06 12:39:36', 9.77, '家电行业', 9.65, 1267918.304118, '海信电器', 1267918.304118, 9.73, 1.225, 8.002, -0.03, 9.69, 9.72, 'sh600060', '2000-01-01 15:03:04', 9, 0.57535, '2014-07-06 12:39:36', 7528383)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:36.302455 #5582]  INFO -- : finish dispatch url task of 家电行业
I, [2014-07-06T20:39:36.302518 #5582]  INFO -- : start to dispatch url task of 机械行业
I, [2014-07-06T20:39:36.713880 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600031-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (66748008.0, 5.06, -0.393, '600031', '2014-07-06 12:39:36', 5.13, '机械行业', 5.05, 3861567.546759, '三一重工', 3850009.011459, 5.1, 1.563, 13.307, -0.02, 5.07, 5.09, 'sh600031', '2000-01-01 15:03:04', 5, 0.17305, '2014-07-06 12:39:36', 13140624)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:36.714151 #5582]  INFO -- : finish dispatch url task of 机械行业
I, [2014-07-06T20:39:36.714289 #5582]  INFO -- : start to dispatch url task of 环保行业
I, [2014-07-06T20:39:37.036051 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600008-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (35186420.0, 6.19, 0.0, '600008', '2014-07-06 12:39:36', 6.22, '环保行业', 6.18, 1361800.0, '首创股份', 1361800.0, 6.21, 2.231, 22.649, 0.0, 6.2, 6.19, 'sh600008', '2000-01-01 15:03:04', 6, 0.25801, '2014-07-06 12:39:36', 5676248)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:37.036288 #5582]  INFO -- : finish dispatch url task of 环保行业
I, [2014-07-06T20:39:37.036381 #5582]  INFO -- : start to dispatch url task of 化纤行业
I, [2014-07-06T20:39:37.313821 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600061-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (35742392.0, 6.25, 0.482, '600061', '2014-07-06 12:39:37', 6.34, '化纤行业', 6.2, 268605.92044, '中纺投资', 268605.92044, 6.24, 4.496, 626.0, 0.03, 6.26, 6.23, 'sh600061', '2000-01-01 15:03:04', 6, 1.32804, '2014-07-06 12:39:37', 5698373)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:37.313951 #5582]  INFO -- : finish dispatch url task of 化纤行业
I, [2014-07-06T20:39:37.313992 #5582]  INFO -- : start to dispatch url task of 化工行业
I, [2014-07-06T20:39:37.825764 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600075-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (18340324.0, 5.02, -0.593, '600075', '2014-07-06 12:39:37', 5.07, '化工行业', 5.0, 220611.776, '*ST新业', 220611.776, 5.07, 1.534, -10.265, -0.03, 5.03, 5.06, 'sh600075', '2000-01-01 15:03:04', 5, 0.8315, '2014-07-06 12:39:37', 3646914)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:37.825990 #5582]  INFO -- : finish dispatch url task of 化工行业
I, [2014-07-06T20:39:37.826082 #5582]  INFO -- : start to dispatch url task of 供水供气
I, [2014-07-06T20:39:38.136959 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600167-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (10127700.0, 10.73, -0.371, '600167', '2014-07-06 12:39:38', 10.83, '供水供气', 10.67, 226403.0, '联美控股', 226403.0, 10.74, 2.315, 16.324, -0.04, 10.74, 10.77, 'sh600167', '2000-01-01 15:03:04', 10, 0.44677, '2014-07-06 12:39:38', 942679)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:38.137109 #5582]  INFO -- : finish dispatch url task of 供水供气
I, [2014-07-06T20:39:38.137150 #5582]  INFO -- : start to dispatch url task of 公路桥梁
I, [2014-07-06T20:39:38.403670 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600012-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (6863946.0, 4.37, -0.907, '600012', '2014-07-06 12:39:38', 4.43, '公路桥梁', 4.36, 724812.57, '皖通高速', 509367.2, 4.41, 0.99, 8.549, -0.04, 4.38, 4.41, 'sh600012', '2000-01-01 15:03:04', 4, 0.13422, '2014-07-06 12:39:38', 1564447)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:38.403795 #5582]  INFO -- : finish dispatch url task of 公路桥梁
I, [2014-07-06T20:39:38.403848 #5582]  INFO -- : start to dispatch url task of 钢铁行业
I, [2014-07-06T20:39:38.703937 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600005-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (30427384.0, 2.03, 0.0, '600005', '2014-07-06 12:39:38', 2.05, '钢铁行业', 2.02, 2059131.083892, '武钢股份', 2059131.083892, 2.03, 0.57, 48.571, 0.0, 2.04, 2.04, 'sh600005', '2000-01-01 15:03:04', 2, 0.14806, '2014-07-06 12:39:38', 14945180)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:38.704216 #5582]  INFO -- : finish dispatch url task of 钢铁行业
I, [2014-07-06T20:39:38.704329 #5582]  INFO -- : start to dispatch url task of 服装鞋类
I, [2014-07-06T20:39:39.038738 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600086-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (102642144.0, 17.89, 0.449, '600086', '2014-07-06 12:39:38', 17.94, '服装鞋类', 17.74, 630584.19288, '东方金钰', 630584.19288, 17.75, 6.751, 40.126, 0.08, 17.9, 17.82, 'sh600086', '2000-01-01 15:03:04', 17, 1.63394, '2014-07-06 12:39:38', 5756055)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:39.038924 #5582]  INFO -- : finish dispatch url task of 服装鞋类
I, [2014-07-06T20:39:39.039003 #5582]  INFO -- : start to dispatch url task of 飞机制造
I, [2014-07-06T20:39:39.328014 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600038-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (303039904.0, 28.71, 2.714, '600038', '2014-07-06 12:39:39', 29.1, '飞机制造', 27.9, 1695335.035216, '哈飞股份', 970218.6, 28.2, 2.846, 58.479, 0.76, 28.75, 28.0, 'sh600038', '2000-01-01 15:03:04', 28, 3.13403, '2014-07-06 12:39:39', 10572647)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:39.328174 #5582]  INFO -- : finish dispatch url task of 飞机制造
I, [2014-07-06T20:39:39.328217 #5582]  INFO -- : start to dispatch url task of 纺织行业
I, [2014-07-06T20:39:39.616886 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600070-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (90949888.0, 7.39, 9.97, '600070', '2014-07-06 12:39:39', 7.39, '纺织行业', 7.1, 202720.803948, '浙江富润', 202720.803948, 7.11, 1.549, 11.03, 0.67, 0.0, 6.72, 'sh600070', '2000-01-01 15:03:04', 7, 4.5253, '2014-07-06 12:39:39', 12413690)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:39.617013 #5582]  INFO -- : finish dispatch url task of 纺织行业
I, [2014-07-06T20:39:39.617055 #5582]  INFO -- : start to dispatch url task of 纺织机械
I, [2014-07-06T20:39:40.028178 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600302-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (13313881.0, 4.64, 0.432, '600302', '2014-07-06 12:39:39', 4.67, '纺织机械', 4.58, 160894.55886, '标准股份', 160894.55886, 4.61, 1.357, 142.638, 0.02, 4.65, 4.63, 'sh600302', '2000-01-01 15:03:04', 4, 0.83109, '2014-07-06 12:39:39', 2875651)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:40.028423 #5582]  INFO -- : finish dispatch url task of 纺织机械
I, [2014-07-06T20:39:40.028522 #5582]  INFO -- : start to dispatch url task of 发电设备
I, [2014-07-06T20:39:40.739485 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600089-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (260197296.0, 8.58, -1.037, '600089', '2014-07-06 12:39:40', 8.69, '发电设备', 8.55, 2719519.254974, '特变电工', 2719519.254974, 8.68, 1.463, 17.044, -0.09, 8.59, 8.68, 'sh600089', '2000-01-01 15:03:04', 8, 0.95475, '2014-07-06 12:39:40', 30226488)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:40.739728 #5582]  INFO -- : finish dispatch url task of 发电设备
I, [2014-07-06T20:39:40.739823 #5582]  INFO -- : start to dispatch url task of 电子信息
I, [2014-07-06T20:39:41.161807 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600050-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (156527888.0, 3.3, -0.601, '600050', '2014-07-06 12:39:41', 3.35, '电子信息', 3.29, 7016073.406745, '中国联通', 7016073.406745, 3.33, 0.924, 20.382, -0.02, 3.31, 3.33, 'sh600050', '2000-01-01 15:03:04', 3, 0.22303, '2014-07-06 12:39:41', 47275336)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:41.161996 #5582]  INFO -- : finish dispatch url task of 电子信息
I, [2014-07-06T20:39:41.162063 #5582]  INFO -- : start to dispatch url task of 电子器件
I, [2014-07-06T20:39:41.584272 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600083-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (8663409.0, 7.27, 0.552, '600083', '2014-07-06 12:39:41', 7.29, '电子器件', 7.16, 167440.0, '博信股份', 164514.041328, 7.24, 56.13, 220.606, 0.04, 7.29, 7.24, 'sh600083', '2000-01-01 15:03:04', 7, 0.52972, '2014-07-06 12:39:41', 1197063)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:41.625718 #5582]  INFO -- : finish dispatch url task of 电子器件
I, [2014-07-06T20:39:41.625915 #5582]  INFO -- : start to dispatch url task of 电器行业
I, [2014-07-06T20:39:41.951075 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600112-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (61832892.0, 12.78, 0.0, '600112', '2014-07-06 12:39:41', 12.85, '电器行业', 12.61, 651782.20288, '天成控股', 651782.20288, 12.8, 5.304, 895.105, 0.0, 12.8, 12.8, 'sh600112', '2000-01-01 15:03:04', 12, 0.95409, '2014-07-06 12:39:41', 4858261)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:41.951238 #5582]  INFO -- : finish dispatch url task of 电器行业
I, [2014-07-06T20:39:41.951282 #5582]  INFO -- : start to dispatch url task of 电力行业
I, [2014-07-06T20:39:42.451137 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600011-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (64203500.0, 5.76, 0.876, '600011', '2014-07-06 12:39:42', 5.77, '电力行业', 5.7, 8095900.86144, '华能国际', 6048000.0, 5.72, 1.231, 7.68, 0.05, 5.77, 5.71, 'sh600011', '2000-01-01 15:03:04', 5, 0.10656, '2014-07-06 12:39:42', 11188658)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:42.451310 #5582]  INFO -- : finish dispatch url task of 电力行业
I, [2014-07-06T20:39:42.451356 #5582]  INFO -- : start to dispatch url task of 船舶制造
I, [2014-07-06T20:39:42.762366 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600072-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (120363544.0, 8.59, -4.12, '600072', '2014-07-06 12:39:42', 8.88, '船舶制造', 8.53, 411927.873546, '*ST钢构', 411927.873546, 8.53, 3.695, -22.598, -0.37, 8.6, 8.98, 'sh600072', '2000-01-01 15:03:04', 8, 2.92619, '2014-07-06 12:39:42', 13999738)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:42.762555 #5582]  INFO -- : finish dispatch url task of 船舶制造
I, [2014-07-06T20:39:42.762619 #5582]  INFO -- : start to dispatch url task of 传媒娱乐
I, [2014-07-06T20:39:43.084773 #5582]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600037-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (242367712.0, 10.6, -3.016, '600037', '2014-07-06 12:39:43', 11.06, '传媒娱乐', 10.52, 1125065.373087, '歌华有线', 1125065.373087, 10.9, 1.926, 29.862, -0.33, 10.61, 10.94, 'sh600037', '2000-01-01 15:03:04', 10, 2.13626, '2014-07-06 12:39:43', 22652528)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:39:43.084927 #5582]  INFO -- : finish dispatch url task of 传媒娱乐
I, [2014-07-06T20:39:43.084976 #5582]  INFO -- : finish dispatch url tasks
I, [2014-07-06T20:59:04.238789 #5725]  INFO -- : finish dispatch url task of 石油行业
I, [2014-07-06T20:59:04.239081 #5725]  INFO -- : start to dispatch url task of 有色金属
I, [2014-07-06T20:59:05.021564 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600111-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (327936192.0, 19.61, -1.01, '600111', '2014-07-06 12:59:04', 19.91, '有色金属', 19.57, 4749628.284, '包钢稀土', 2901240.383694, 19.81, 6.015, 30.174, -0.2, 19.62, 19.81, 'sh600111', '2000-01-01 15:03:04', 19, 1.12702, '2014-07-06 12:59:04', 16673865)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:05.021842 #5725]  INFO -- : finish dispatch url task of 有色金属
I, [2014-07-06T20:59:05.021942 #5725]  INFO -- : start to dispatch url task of 造纸行业
I, [2014-07-06T20:59:05.432893 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600069-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (35858476.0, 3.67, -1.344, '600069', '2014-07-06 12:59:05', 3.75, '造纸行业', 3.6, 302912.310848, '银鸽投资', 302912.310848, 3.72, 2.018, -10.794, -0.05, 3.68, 3.72, 'sh600069', '2000-01-01 15:03:04', 3, 1.18426, '2014-07-06 12:59:05', 9774580)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:05.433073 #5725]  INFO -- : finish dispatch url task of 造纸行业
I, [2014-07-06T20:59:05.433140 #5725]  INFO -- : start to dispatch url task of 印刷包装
I, [2014-07-06T20:59:05.921920 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600210-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (208003312.0, 3.39, 8.307, '600210', '2014-07-06 12:59:05', 3.44, '印刷包装', 3.1, 487053.557562, '紫江企业', 487053.557562, 3.11, 1.309, 21.321, 0.26, 3.4, 3.13, 'sh600210', '2000-01-01 15:03:04', 3, 4.34277, '2014-07-06 12:59:05', 62394144)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:05.922135 #5725]  INFO -- : finish dispatch url task of 印刷包装
I, [2014-07-06T20:59:05.922206 #5725]  INFO -- : start to dispatch url task of 仪器仪表
I, [2014-07-06T20:59:06.277488 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600366-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (258254320.0, 14.96, -0.73, '600366', '2014-07-06 12:59:06', 15.56, '仪器仪表', 14.95, 769688.634, '宁波韵升', 769688.634, 15.23, 2.517, 21.981, -0.11, 14.97, 15.07, 'sh600366', '2000-01-01 15:03:04', 14, 3.27972, '2014-07-06 12:59:06', 16874104)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:06.277745 #5725]  INFO -- : finish dispatch url task of 仪器仪表
I, [2014-07-06T20:59:06.277846 #5725]  INFO -- : start to dispatch url task of 医疗器械
I, [2014-07-06T20:59:06.933253 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600055-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (0.0, 0.0, 0.0, '600055', '2014-07-06 12:59:06', 0.0, '医疗器械', 0.0, 290043.0, '华润万东', 290043.0, 0.0, 4.456, 67.0, 0.0, 0.0, 13.4, 'sh600055', '2000-01-01 15:03:04', 13, 0.0, '2014-07-06 12:59:06', 0)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:06.933484 #5725]  INFO -- : finish dispatch url task of 医疗器械
I, [2014-07-06T20:59:06.933659 #5725]  INFO -- : start to dispatch url task of 物资外贸
I, [2014-07-06T20:59:07.255602 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600058-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (47459068.0, 10.54, -1.033, '600058', '2014-07-06 12:59:07', 10.68, '物资外贸', 10.51, 1129793.889394, '五矿发展', 1129793.889394, 10.65, 1.316, 40.383, -0.11, 10.55, 10.65, 'sh600058', '2000-01-01 15:03:04', 10, 0.41967, '2014-07-06 12:59:07', 4498450)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:07.255764 #5725]  INFO -- : finish dispatch url task of 物资外贸
I, [2014-07-06T20:59:07.255857 #5725]  INFO -- : start to dispatch url task of 陶瓷行业
I, [2014-07-06T20:59:07.555871 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600145-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (25994612.0, 3.49, 1.449, '600145', '2014-07-06 12:59:07', 3.54, '陶瓷行业', 3.42, 132189.75, '*ST国创', 132189.75, 3.42, 12.359, -15.217, 0.05, 3.5, 3.45, 'sh600145', '2000-01-01 15:03:04', 3, 1.96651, '2014-07-06 12:59:07', 7427207)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:07.556155 #5725]  INFO -- : finish dispatch url task of 陶瓷行业
I, [2014-07-06T20:59:07.556315 #5725]  INFO -- : start to dispatch url task of 塑料制品
I, [2014-07-06T20:59:07.889137 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600074-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (272586432.0, 5.77, 0.522, '600074', '2014-07-06 12:59:07', 6.12, '塑料制品', 5.55, 517877.182152, '中达股份', 517877.182152, 5.75, 8.2, 21.729, 0.03, 5.78, 5.75, 'sh600074', '2000-01-01 15:03:04', 5, 5.19355, '2014-07-06 12:59:07', 46533204)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:07.889284 #5725]  INFO -- : finish dispatch url task of 塑料制品
I, [2014-07-06T20:59:07.889356 #5725]  INFO -- : start to dispatch url task of 水泥行业
I, [2014-07-06T20:59:08.200630 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600217-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (184034192.0, 6.21, -1.268, '600217', '2014-07-06 12:59:08', 6.6, '水泥行业', 6.21, 411678.4, '秦岭水泥', 411678.4, 6.27, -112.658, -35.178, -0.08, 6.22, 6.31, 'sh600217', '2000-01-01 15:03:04', 6, 4.34289, '2014-07-06 12:59:08', 28697824)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:08.200938 #5725]  INFO -- : finish dispatch url task of 水泥行业
I, [2014-07-06T20:59:08.201102 #5725]  INFO -- : start to dispatch url task of 食品行业
I, [2014-07-06T20:59:08.556286 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600073-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (157881920.0, 7.63, 2.276, '600073', '2014-07-06 12:59:08', 7.65, '食品行业', 7.45, 628569.647724, '上海梅林', 592711.287096, 7.45, 3.188, 40.211, 0.17, 7.64, 7.47, 'sh600073', '2000-01-01 15:03:04', 7, 2.69369, '2014-07-06 12:59:08', 20897634)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:08.556501 #5725]  INFO -- : finish dispatch url task of 食品行业
I, [2014-07-06T20:59:08.556577 #5725]  INFO -- : start to dispatch url task of 商业百货
I, [2014-07-06T20:59:09.000870 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600056-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (86485640.0, 10.76, -1.011, '600056', '2014-07-06 12:59:08', 10.98, '商业百货', 10.66, 1090476.9318, '中国医药', 952561.808808, 10.93, 1.211, 10.16, -0.11, 10.77, 10.88, 'sh600056', '2000-01-01 15:03:04', 10, 0.90982, '2014-07-06 12:59:08', 8046984)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:09.001025 #5725]  INFO -- : finish dispatch url task of 商业百货
I, [2014-07-06T20:59:09.001097 #5725]  INFO -- : start to dispatch url task of 汽车制造
I, [2014-07-06T20:59:20.723383 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600006-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (24651858.0, 3.03, -0.977, '600006', '2014-07-06 12:59:20', 3.06, '汽车制造', 3.02, 608000.0, '东风汽车', 608000.0, 3.06, 1.013, 121.116, -0.03, 3.04, 3.07, 'sh600006', '2000-01-01 15:03:04', 3, 0.40556, '2014-07-06 12:59:20', 8111218)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:20.723563 #5725]  INFO -- : finish dispatch url task of 汽车制造
I, [2014-07-06T20:59:20.723630 #5725]  INFO -- : start to dispatch url task of 农药化肥
I, [2014-07-06T20:59:21.090062 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600096-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (22447156.0, 7.11, -0.559, '600096', '2014-07-06 12:59:21', 7.19, '农药化肥', 7.11, 803903.654192, '云天化', 371139.693168, 7.17, 1.039, 18.762, -0.04, 7.12, 7.16, 'sh600096', '2000-01-01 15:03:04', 7, 0.60325, '2014-07-06 12:59:21', 3144540)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:21.090261 #5725]  INFO -- : finish dispatch url task of 农药化肥
I, [2014-07-06T20:59:21.090333 #5725]  INFO -- : start to dispatch url task of 农林牧渔
I, [2014-07-06T20:59:21.690136 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600097-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (10431159.0, 10.57, -0.189, '600097', '2014-07-06 12:59:21', 10.7, '农林牧渔', 10.53, 214348.579258, '开创国际', 122145.982562, 10.7, 5.238, 20.745, -0.02, 10.58, 10.6, 'sh600097', '2000-01-01 15:03:04', 10, 0.85453, '2014-07-06 12:59:21', 986559)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:21.690295 #5725]  INFO -- : finish dispatch url task of 农林牧渔
I, [2014-07-06T20:59:21.690364 #5725]  INFO -- : start to dispatch url task of 酿酒行业
I, [2014-07-06T20:59:22.057050 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600059-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (75285104.0, 7.81, 0.128, '600059', '2014-07-06 12:59:22', 7.86, '酿酒行业', 7.75, 631457.372865, '古越龙山', 631457.372865, 7.78, 1.941, 33.957, 0.01, 7.82, 7.8, 'sh600059', '2000-01-01 15:03:04', 7, 1.19224, '2014-07-06 12:59:22', 9639582)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:22.057371 #5725]  INFO -- : finish dispatch url task of 酿酒行业
I, [2014-07-06T20:59:22.057575 #5725]  INFO -- : start to dispatch url task of 摩托车
I, [2014-07-06T20:59:22.468266 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600099-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (11941741.0, 6.42, -1.079, '600099', '2014-07-06 12:59:22', 6.49, '摩托车', 6.38, 140675.04, '林海股份', 140675.04, 6.49, 2.942, 3566.667, -0.07, 6.43, 6.49, 'sh600099', '2000-01-01 15:03:04', 6, 0.84851, '2014-07-06 12:59:22', 1859249)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:22.468412 #5725]  INFO -- : finish dispatch url task of 摩托车
I, [2014-07-06T20:59:22.468480 #5725]  INFO -- : start to dispatch url task of 煤炭行业
I, [2014-07-06T20:59:22.746337 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600121-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (7249013.0, 4.1, -0.964, '600121', '2014-07-06 12:59:22', 4.14, '煤炭行业', 4.09, 417306.123015, '郑州煤电', 258576.54, 4.14, 1.077, 82.2, -0.04, 4.11, 4.15, 'sh600121', '2000-01-01 15:03:04', 4, 0.28051, '2014-07-06 12:59:22', 1764800)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:22.746628 #5725]  INFO -- : finish dispatch url task of 煤炭行业
I, [2014-07-06T20:59:22.746792 #5725]  INFO -- : start to dispatch url task of 开发区
I, [2014-07-06T20:59:23.068676 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600007-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (8363400.0, 9.68, -0.615, '600007', '2014-07-06 12:59:23', 9.83, '开发区', 9.6, 976056.775446, '中国国贸', 976056.775446, 9.75, 1.955, 30.281, -0.06, 9.7, 9.75, 'sh600007', '2000-01-01 15:03:04', 9, 0.08551, '2014-07-06 12:59:23', 861341)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:23.068835 #5725]  INFO -- : finish dispatch url task of 开发区
I, [2014-07-06T20:59:23.068903 #5725]  INFO -- : start to dispatch url task of 酒店旅游
I, [2014-07-06T20:59:28.401836 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600054-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (26797140.0, 12.7, 0.079, '600054', '2014-07-06 12:59:28', 12.76, '酒店旅游', 12.41, 599085.85, '黄山旅游', 149495.02, 12.68, 2.931, 41.0, 0.01, 12.71, 12.7, 'sh600054', '2000-01-01 15:03:04', 12, 1.81057, '2014-07-06 12:59:28', 2129590)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:28.402002 #5725]  INFO -- : finish dispatch url task of 酒店旅游
I, [2014-07-06T20:59:28.402072 #5725]  INFO -- : start to dispatch url task of 交通运输
I, [2014-07-06T20:59:28.813112 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600004-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (22081868.0, 7.1, 0.0, '600004', '2014-07-06 12:59:28', 7.14, '交通运输', 7.07, 817650.0, '白云机场', 817650.0, 7.12, 1.026, 9.115, 0.0, 7.11, 7.11, 'sh600004', '2000-01-01 15:03:04', 7, 0.2704, '2014-07-06 12:59:28', 3109598)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:28.813257 #5725]  INFO -- : finish dispatch url task of 交通运输
I, [2014-07-06T20:59:28.813338 #5725]  INFO -- : start to dispatch url task of 建筑建材
I, [2014-07-06T20:59:29.724494 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600039-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (44009244.0, 5.57, -1.239, '600039', '2014-07-06 12:59:29', 5.67, '建筑建材', 5.5, 842505.415488, '四川路桥', 305337.6, 5.65, 1.281, 11.385, -0.07, 5.58, 5.65, 'sh600039', '2000-01-01 15:03:04', 5, 1.44578, '2014-07-06 12:59:29', 7911324)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:29.724716 #5725]  INFO -- : finish dispatch url task of 建筑建材
I, [2014-07-06T20:59:29.724822 #5725]  INFO -- : start to dispatch url task of 家具行业
I, [2014-07-06T20:59:33.236186 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600337-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (15522859.0, 5.78, -0.686, '600337', '2014-07-06 12:59:33', 5.86, '家具行业', 5.76, 374503.232601, '美克股份', 369594.470601, 5.83, 1.368, 21.444, -0.04, 5.79, 5.83, 'sh600337', '2000-01-01 15:03:04', 5, 0.42034, '2014-07-06 12:59:33', 2683171)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:33.236416 #5725]  INFO -- : finish dispatch url task of 家具行业
I, [2014-07-06T20:59:33.236524 #5725]  INFO -- : start to dispatch url task of 家电行业
I, [2014-07-06T20:59:33.647728 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600060-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (73075040.0, 9.68, -0.309, '600060', '2014-07-06 12:59:33', 9.77, '家电行业', 9.65, 1267918.304118, '海信电器', 1267918.304118, 9.73, 1.225, 8.002, -0.03, 9.69, 9.72, 'sh600060', '2000-01-01 15:03:04', 9, 0.57535, '2014-07-06 12:59:33', 7528383)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:33.647971 #5725]  INFO -- : finish dispatch url task of 家电行业
I, [2014-07-06T20:59:33.648044 #5725]  INFO -- : start to dispatch url task of 机械行业
I, [2014-07-06T20:59:34.125343 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600031-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (66748008.0, 5.06, -0.393, '600031', '2014-07-06 12:59:34', 5.13, '机械行业', 5.05, 3861567.546759, '三一重工', 3850009.011459, 5.1, 1.563, 13.307, -0.02, 5.07, 5.09, 'sh600031', '2000-01-01 15:03:04', 5, 0.17305, '2014-07-06 12:59:34', 13140624)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:34.125497 #5725]  INFO -- : finish dispatch url task of 机械行业
I, [2014-07-06T20:59:34.125567 #5725]  INFO -- : start to dispatch url task of 环保行业
I, [2014-07-06T20:59:34.449104 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600008-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (35186420.0, 6.19, 0.0, '600008', '2014-07-06 12:59:34', 6.22, '环保行业', 6.18, 1361800.0, '首创股份', 1361800.0, 6.21, 2.231, 22.649, 0.0, 6.2, 6.19, 'sh600008', '2000-01-01 15:03:04', 6, 0.25801, '2014-07-06 12:59:34', 5676248)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:34.449259 #5725]  INFO -- : finish dispatch url task of 环保行业
I, [2014-07-06T20:59:34.449330 #5725]  INFO -- : start to dispatch url task of 化纤行业
I, [2014-07-06T20:59:34.793921 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600061-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (35742392.0, 6.25, 0.482, '600061', '2014-07-06 12:59:34', 6.34, '化纤行业', 6.2, 268605.92044, '中纺投资', 268605.92044, 6.24, 4.496, 626.0, 0.03, 6.26, 6.23, 'sh600061', '2000-01-01 15:03:04', 6, 1.32804, '2014-07-06 12:59:34', 5698373)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:34.794105 #5725]  INFO -- : finish dispatch url task of 化纤行业
I, [2014-07-06T20:59:34.794720 #5725]  INFO -- : start to dispatch url task of 化工行业
I, [2014-07-06T20:59:35.304967 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600075-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (18340324.0, 5.02, -0.593, '600075', '2014-07-06 12:59:35', 5.07, '化工行业', 5.0, 220611.776, '*ST新业', 220611.776, 5.07, 1.534, -10.265, -0.03, 5.03, 5.06, 'sh600075', '2000-01-01 15:03:04', 5, 0.8315, '2014-07-06 12:59:35', 3646914)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:35.305138 #5725]  INFO -- : finish dispatch url task of 化工行业
I, [2014-07-06T20:59:35.305207 #5725]  INFO -- : start to dispatch url task of 供水供气
I, [2014-07-06T20:59:38.671692 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600167-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (10127700.0, 10.73, -0.371, '600167', '2014-07-06 12:59:38', 10.83, '供水供气', 10.67, 226403.0, '联美控股', 226403.0, 10.74, 2.315, 16.324, -0.04, 10.74, 10.77, 'sh600167', '2000-01-01 15:03:04', 10, 0.44677, '2014-07-06 12:59:38', 942679)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:38.671892 #5725]  INFO -- : finish dispatch url task of 供水供气
I, [2014-07-06T20:59:38.671971 #5725]  INFO -- : start to dispatch url task of 公路桥梁
I, [2014-07-06T20:59:39.016619 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600012-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (6863946.0, 4.37, -0.907, '600012', '2014-07-06 12:59:38', 4.43, '公路桥梁', 4.36, 724812.57, '皖通高速', 509367.2, 4.41, 0.99, 8.549, -0.04, 4.38, 4.41, 'sh600012', '2000-01-01 15:03:04', 4, 0.13422, '2014-07-06 12:59:38', 1564447)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:39.016857 #5725]  INFO -- : finish dispatch url task of 公路桥梁
I, [2014-07-06T20:59:39.016964 #5725]  INFO -- : start to dispatch url task of 钢铁行业
I, [2014-07-06T20:59:39.627707 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600005-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (30427384.0, 2.03, 0.0, '600005', '2014-07-06 12:59:39', 2.05, '钢铁行业', 2.02, 2059131.083892, '武钢股份', 2059131.083892, 2.03, 0.57, 48.571, 0.0, 2.04, 2.04, 'sh600005', '2000-01-01 15:03:04', 2, 0.14806, '2014-07-06 12:59:39', 14945180)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:39.627933 #5725]  INFO -- : finish dispatch url task of 钢铁行业
I, [2014-07-06T20:59:39.628040 #5725]  INFO -- : start to dispatch url task of 服装鞋类
I, [2014-07-06T20:59:39.939021 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600086-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (102642144.0, 17.89, 0.449, '600086', '2014-07-06 12:59:39', 17.94, '服装鞋类', 17.74, 630584.19288, '东方金钰', 630584.19288, 17.75, 6.751, 40.126, 0.08, 17.9, 17.82, 'sh600086', '2000-01-01 15:03:04', 17, 1.63394, '2014-07-06 12:59:39', 5756055)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:39.939825 #5725]  INFO -- : finish dispatch url task of 服装鞋类
I, [2014-07-06T20:59:39.939939 #5725]  INFO -- : start to dispatch url task of 飞机制造
I, [2014-07-06T20:59:40.228125 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600038-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (303039904.0, 28.71, 2.714, '600038', '2014-07-06 12:59:40', 29.1, '飞机制造', 27.9, 1695335.035216, '哈飞股份', 970218.6, 28.2, 2.846, 58.479, 0.76, 28.75, 28.0, 'sh600038', '2000-01-01 15:03:04', 28, 3.13403, '2014-07-06 12:59:40', 10572647)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:40.228353 #5725]  INFO -- : finish dispatch url task of 飞机制造
I, [2014-07-06T20:59:40.228451 #5725]  INFO -- : start to dispatch url task of 纺织行业
I, [2014-07-06T20:59:40.939326 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600070-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (90949888.0, 7.39, 9.97, '600070', '2014-07-06 12:59:40', 7.39, '纺织行业', 7.1, 202720.803948, '浙江富润', 202720.803948, 7.11, 1.549, 11.03, 0.67, 0.0, 6.72, 'sh600070', '2000-01-01 15:03:04', 7, 4.5253, '2014-07-06 12:59:40', 12413690)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:40.939559 #5725]  INFO -- : finish dispatch url task of 纺织行业
I, [2014-07-06T20:59:40.939639 #5725]  INFO -- : start to dispatch url task of 纺织机械
I, [2014-07-06T20:59:41.317142 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600302-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (13313881.0, 4.64, 0.432, '600302', '2014-07-06 12:59:41', 4.67, '纺织机械', 4.58, 160894.55886, '标准股份', 160894.55886, 4.61, 1.357, 142.638, 0.02, 4.65, 4.63, 'sh600302', '2000-01-01 15:03:04', 4, 0.83109, '2014-07-06 12:59:41', 2875651)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:41.317281 #5725]  INFO -- : finish dispatch url task of 纺织机械
I, [2014-07-06T20:59:41.317349 #5725]  INFO -- : start to dispatch url task of 发电设备
I, [2014-07-06T20:59:41.795013 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600089-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (260197296.0, 8.58, -1.037, '600089', '2014-07-06 12:59:41', 8.69, '发电设备', 8.55, 2719519.254974, '特变电工', 2719519.254974, 8.68, 1.463, 17.044, -0.09, 8.59, 8.68, 'sh600089', '2000-01-01 15:03:04', 8, 0.95475, '2014-07-06 12:59:41', 30226488)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:41.795164 #5725]  INFO -- : finish dispatch url task of 发电设备
I, [2014-07-06T20:59:41.795232 #5725]  INFO -- : start to dispatch url task of 电子信息
I, [2014-07-06T20:59:43.317672 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600050-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (156527888.0, 3.3, -0.601, '600050', '2014-07-06 12:59:43', 3.35, '电子信息', 3.29, 7016073.406745, '中国联通', 7016073.406745, 3.33, 0.924, 20.382, -0.02, 3.31, 3.33, 'sh600050', '2000-01-01 15:03:04', 3, 0.22303, '2014-07-06 12:59:43', 47275336)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:43.318026 #5725]  INFO -- : finish dispatch url task of 电子信息
I, [2014-07-06T20:59:43.318197 #5725]  INFO -- : start to dispatch url task of 电子器件
I, [2014-07-06T20:59:44.007119 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600083-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (8663409.0, 7.27, 0.552, '600083', '2014-07-06 12:59:43', 7.29, '电子器件', 7.16, 167440.0, '博信股份', 164514.041328, 7.24, 56.13, 220.606, 0.04, 7.29, 7.24, 'sh600083', '2000-01-01 15:03:04', 7, 0.52972, '2014-07-06 12:59:43', 1197063)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:44.007306 #5725]  INFO -- : finish dispatch url task of 电子器件
I, [2014-07-06T20:59:44.007373 #5725]  INFO -- : start to dispatch url task of 电器行业
I, [2014-07-06T20:59:47.429383 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600112-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (61832892.0, 12.78, 0.0, '600112', '2014-07-06 12:59:47', 12.85, '电器行业', 12.61, 651782.20288, '天成控股', 651782.20288, 12.8, 5.304, 895.105, 0.0, 12.8, 12.8, 'sh600112', '2000-01-01 15:03:04', 12, 0.95409, '2014-07-06 12:59:47', 4858261)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:47.429544 #5725]  INFO -- : finish dispatch url task of 电器行业
I, [2014-07-06T20:59:47.429680 #5725]  INFO -- : start to dispatch url task of 电力行业
I, [2014-07-06T20:59:48.207239 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600011-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (64203500.0, 5.76, 0.876, '600011', '2014-07-06 12:59:48', 5.77, '电力行业', 5.7, 8095900.86144, '华能国际', 6048000.0, 5.72, 1.231, 7.68, 0.05, 5.77, 5.71, 'sh600011', '2000-01-01 15:03:04', 5, 0.10656, '2014-07-06 12:59:48', 11188658)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:48.207428 #5725]  INFO -- : finish dispatch url task of 电力行业
I, [2014-07-06T20:59:48.207499 #5725]  INFO -- : start to dispatch url task of 船舶制造
I, [2014-07-06T20:59:48.585681 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600072-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (120363544.0, 8.59, -4.12, '600072', '2014-07-06 12:59:48', 8.88, '船舶制造', 8.53, 411927.873546, '*ST钢构', 411927.873546, 8.53, 3.695, -22.598, -0.37, 8.6, 8.98, 'sh600072', '2000-01-01 15:03:04', 8, 2.92619, '2014-07-06 12:59:48', 13999738)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:48.585982 #5725]  INFO -- : finish dispatch url task of 船舶制造
I, [2014-07-06T20:59:48.586145 #5725]  INFO -- : start to dispatch url task of 传媒娱乐
I, [2014-07-06T20:59:48.918839 #5725]  INFO -- : Error in crawl_stock_day_info:  Mysql2::Error: Duplicate entry '600037-15:03:04' for key 'index_stock_short_term_infos_on_code_and_ticktime': INSERT INTO `stock_short_term_infos` (`amount`, `buy`, `changepercent`, `code`, `created_at`, `high`, `industry`, `low`, `mktcap`, `name`, `nmc`, `open`, `pb`, `per`, `pricechange`, `sell`, `settlement`, `symbol`, `ticktime`, `trade`, `turnoverratio`, `updated_at`, `volume`) VALUES (242367712.0, 10.6, -3.016, '600037', '2014-07-06 12:59:48', 11.06, '传媒娱乐', 10.52, 1125065.373087, '歌华有线', 1125065.373087, 10.9, 1.926, 29.862, -0.33, 10.61, 10.94, 'sh600037', '2000-01-01 15:03:04', 10, 2.13626, '2014-07-06 12:59:48', 22652528)
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `query'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `block in execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:373:in `block in log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_adapter.rb:367:in `log'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:303:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:228:in `execute'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/mysql2_adapter.rb:250:in `exec_insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:95:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/relation.rb:64:in `insert'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:502:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:87:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `block in _create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:306:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/timestamp.rb:57:in `_create_record'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:482:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `block in create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/callbacks.rb:82:in `run_callbacks'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/callbacks.rb:302:in `create_or_update'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:103:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/validations.rb:51:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/attribute_methods/dirty.rb:21:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block (2 levels) in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:329:in `block in with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:208:in `transaction'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:326:in `with_transaction_returning_status'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:268:in `block in save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:283:in `rollback_active_record_state!'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/transactions.rb:267:in `save'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:34:in `create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `block in create'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `collect'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.2/lib/active_record/persistence.rb:31:in `create'
/home/chenjiang/RubymineProjects/StockCrawler/crawler/stock_day_info_crawler.rb:24:in `crawl_stock_day_info'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:33:in `block in dispatch_url'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/activesupport-4.1.2/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:26:in `dispatch_url'
/home/chenjiang/RubymineProjects/StockCrawler/controller/stock_day_info_controller.rb:52:in `<top (required)>'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_load'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/lib/ruby-debug-ide.rb:86:in `debug_program'
/home/chenjiang/.rvm/gems/ruby-2.0.0-p481/gems/ruby-debug-ide-0.4.23.beta1/bin/rdebug-ide:110:in `<top (required)>'
-e:1:in `load'
-e:1:in `<main>'
I, [2014-07-06T20:59:48.918983 #5725]  INFO -- : finish dispatch url task of 传媒娱乐
I, [2014-07-06T20:59:48.919053 #5725]  INFO -- : finish dispatch url tasks
